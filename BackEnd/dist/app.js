"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const express_1 = tslib_1.__importStar(require("express"));
const logger_1 = tslib_1.__importDefault(require("./models/error/logger"));
const responder_1 = tslib_1.__importDefault(require("./models/error/responder"));
const not_found_1 = tslib_1.__importDefault(require("./models/not-found"));
const teams_1 = tslib_1.__importDefault(require("./routers/teams"));
const meetings_1 = tslib_1.__importDefault(require("./routers/meetings"));
const config_1 = tslib_1.__importDefault(require("config"));
const sequelize_1 = tslib_1.__importDefault(require("./db/sequelize"));
const cors_1 = tslib_1.__importDefault(require("cors"));
const app = (0, express_1.default)();
const port = config_1.default.get('app.port');
const appName = config_1.default.get('app.name');
app.use((0, cors_1.default)());
app.use((0, express_1.json)());
app.use('/teams', teams_1.default);
app.use('/meetings', meetings_1.default);
app.use(not_found_1.default);
app.use(logger_1.default);
app.use(responder_1.default);
sequelize_1.default.sync({ force: process.argv[2] === 'sync' });
app.listen(port, () => console.log(`${appName} started on port ${port}`));
